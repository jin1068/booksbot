{{ header }}
<div id="account-duobao" class="container">
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
      <li class="breadcrumb-item"><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul>

  <div class="row">{{ column_left }}
    <div id="content" class="col">{{ content_top }}
      <h1 class="mb-4">{{ heading_title }}</h1>

      <div class="card mb-4">
        <div class="card-header d-flex flex-wrap justify-content-between align-items-center">
          <h3 class="card-title mb-0">{{ text_joined_list }}</h3>
          <span class="text-muted small">{{ text_balance }} {{ current_balance }}</span>
        </div>
        <div class="card-body">
          {% if issues %}
            <div class="table-responsive">
              <table class="table table-striped align-middle">
                <thead>
                  <tr>
                    <th>{{ column_activity }}</th>
                    <th class="text-center">{{ column_issue }}</th>
                    <th class="text-center">{{ column_my_slots }}</th>
                    <th class="text-center">{{ column_tickets }}</th>
                    <th style="min-width:160px;">{{ column_progress }}</th>
                    <th class="text-center">{{ column_status }}</th>
                    <th class="text-center">{{ column_start_time }}</th>
                    <th class="text-center">{{ column_end_time }}</th>
                    <th class="text-end"></th>
                  </tr>
                </thead>
                <tbody>
                  {% for issue in issues %}
                    <tr>
                      <td>
                        <div class="fw-semibold">{{ issue.title }}</div>
                        {% if issue.sub_title %}
                          <div class="text-muted small">{{ issue.sub_title }}</div>
                        {% endif %}
                      </td>
                      <td class="text-center">#{{ issue.issue_no }}</td>
                      <td class="text-center">{{ issue.my_slots }}</td>
                      <td class="text-center">
                        {% if issue.ticket_range %}
                          {{ issue.ticket_range }}
                        {% else %}
                          <span class="text-muted">-</span>
                        {% endif %}
                      </td>
                      <td>
                        <div class="progress" style="height: 6px;">
                          <div class="progress-bar" role="progressbar" style="width: {{ issue.progress }}%;" aria-valuenow="{{ issue.progress }}" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="small text-secondary mt-1">{{ issue.joined_slots }}/{{ issue.total_slots }} ({{ issue.progress }}%)</div>
                      </td>
                      <td class="text-center">
                        <span class="badge bg-secondary">{{ issue.status_text }}</span>
                      </td>
                      <td class="text-center">
                        {% if issue.start_time %}
                          {{ issue.start_time }}
                        {% else %}
                          <span class="text-muted">-</span>
                        {% endif %}
                      </td>
                      <td class="text-center">
                        {% if issue.end_time %}
                          {{ issue.end_time }}
                        {% else %}
                          <span class="text-muted">-</span>
                        {% endif %}
                      </td>
                      <td class="text-end">
                        <a href="{{ issue.detail_href }}" class="btn btn-outline-primary btn-sm">{{ button_view_detail }}</a>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>

            <div class="row align-items-center mt-3">
              <div class="col-md-6 text-start">{{ pagination }}</div>
              <div class="col-md-6 text-md-end">{{ results }}</div>
            </div>
          {% else %}
            <div class="alert alert-info mb-0">{{ text_no_issues }}</div>
          {% endif %}
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3 class="card-title mb-0">{{ text_wins_list }}</h3>
        </div>
        <div class="card-body">
          {% if wins %}
            <div class="table-responsive">
              <table class="table table-bordered align-middle">
                <thead>
                  <tr>
                    <th>{{ column_activity }}</th>
                    <th class="text-center">{{ column_issue }}</th>
                    <th class="text-center">{{ column_ticket }}</th>
                    <th class="text-center">{{ column_draw_time }}</th>
                    <th class="text-end"></th>
                  </tr>
                </thead>
                <tbody>
                  {% for win in wins %}
                    <tr>
                      <td>
                        <div class="fw-semibold">{{ win.title }}</div>
                        {% if win.sub_title %}
                          <div class="text-muted small">{{ win.sub_title }}</div>
                        {% endif %}
                      </td>
                      <td class="text-center">#{{ win.issue_no }}</td>
                      <td class="text-center">{{ win.winner_ticket }}</td>
                      <td class="text-center">
                        {% if win.date_modified %}
                          {{ win.date_modified }}
                        {% else %}
                          <span class="text-muted">-</span>
                        {% endif %}
                      </td>
                      <td class="text-end">
                        <a href="{{ win.detail_href }}" class="btn btn-outline-primary btn-sm">{{ button_view_detail }}</a>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          {% else %}
            <div class="alert alert-secondary mb-0">{{ text_no_wins }}</div>
          {% endif %}
        </div>
      </div>

      <div class="d-flex justify-content-end mb-4">
        <a href="{{ continue }}" class="btn btn-secondary">{{ button_back }}</a>
      </div>
      {{ content_bottom }}</div>
    {{ column_right }}</div>
</div>
{{ footer }}
